var TLConfigurator=(()=>{var Q=Object.defineProperty;var Ge=Object.getOwnPropertyDescriptor;var Be=Object.getOwnPropertyNames;var Ve=Object.prototype.hasOwnProperty;var He=(e,t)=>{for(var s in t)Q(e,s,{get:t[s],enumerable:!0})},Ue=(e,t,s,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Be(t))!Ve.call(e,i)&&i!==s&&Q(e,i,{get:()=>t[i],enumerable:!(n=Ge(t,i))||n.enumerable});return e};var Fe=e=>Ue(Q({},"__esModule",{value:!0}),e);var nt={};He(nt,{default:()=>tt,init:()=>re});var P={webhookUrl:"https://hook.eu2.make.com/l15ycdsxdmqri2brp6h3ick7b0fl4yef",inactivityTimeout:12e3,suggestionDuration:8e3,defaultLang:"de",animations:{popIn:300,popOut:200,staggerDelay:50,fadeIn:200,fadeOut:150},selectors:{root:"[data-configurator]",servicesGrid:"[data-services-grid]",buildArea:"[data-build-area]",summary:"[data-summary]",summaryItems:"[data-summary-items]",submitBtn:"[data-submit-btn]",submitStatus:"[data-submit-status]",langToggle:"[data-lang-toggle]",suggestionContainer:"[data-suggestion-container]"},templates:{serviceCard:'[data-template="service-card"]',pageCard:'[data-template="page-card"]',moduleCard:'[data-template="module-card"]',addonBtn:'[data-template="addon-btn"]',summaryChip:'[data-template="summary-chip"]',suggestion:'[data-template="suggestion"]',serviceBuild:'[data-template="service-build"]',sizeBtn:'[data-template="size-btn"]'}};var We=[{slug:"webdesign",name:"Webdesign",nameEn:"Web Design",icon:"\u{1F310}",description:"Professionelle Websites mit modernem Design",descriptionEn:"Professional websites with modern design",visualType:"pages",order:1},{slug:"social_media",name:"Social Media Marketing",nameEn:"Social Media Marketing",icon:"\u{1F4F1}",description:"Strategische Social Media Pr\xE4senz",descriptionEn:"Strategic social media presence",visualType:"modules",order:2},{slug:"recruiting",name:"Mitarbeitergewinnung",nameEn:"Recruiting",icon:"\u{1F465}",description:"Effektive Personalgewinnung",descriptionEn:"Effective talent acquisition",visualType:"cards",order:3},{slug:"webapps",name:"Webanwendungen",nameEn:"Web Applications",icon:"\u26A1",description:"Ma\xDFgeschneiderte Web-Apps",descriptionEn:"Custom web applications",visualType:"modules",order:4},{slug:"automation",name:"Lead/Automatisierung",nameEn:"Lead/Automation",icon:"\u{1F916}",description:"Automatisierte Lead-Systeme",descriptionEn:"Automated lead systems",visualType:"modules",order:5}],Ke={webdesign:[{slug:"3_pages",name:"3 Seiten",nameEn:"3 Pages",serviceSlug:"webdesign",visualCount:3,order:1},{slug:"5_pages",name:"5 Seiten",nameEn:"5 Pages",serviceSlug:"webdesign",visualCount:5,order:2},{slug:"10_pages",name:"10 Seiten",nameEn:"10 Pages",serviceSlug:"webdesign",visualCount:10,order:3},{slug:"custom_pages",name:"Individuell",nameEn:"Custom",serviceSlug:"webdesign",visualCount:1,order:4}],social_media:[{slug:"starter",name:"Starter",nameEn:"Starter",serviceSlug:"social_media",visualCount:2,order:1},{slug:"professional",name:"Professional",nameEn:"Professional",serviceSlug:"social_media",visualCount:4,order:2},{slug:"enterprise",name:"Enterprise",nameEn:"Enterprise",serviceSlug:"social_media",visualCount:6,order:3}],recruiting:[{slug:"single_position",name:"1 Stelle",nameEn:"1 Position",serviceSlug:"recruiting",visualCount:1,order:1},{slug:"multi_position",name:"3-5 Stellen",nameEn:"3-5 Positions",serviceSlug:"recruiting",visualCount:4,order:2},{slug:"campaign",name:"Kampagne",nameEn:"Campaign",serviceSlug:"recruiting",visualCount:6,order:3}],webapps:[{slug:"mvp",name:"MVP",nameEn:"MVP",serviceSlug:"webapps",visualCount:3,order:1},{slug:"standard",name:"Standard",nameEn:"Standard",serviceSlug:"webapps",visualCount:5,order:2},{slug:"complex",name:"Komplex",nameEn:"Complex",serviceSlug:"webapps",visualCount:8,order:3}],automation:[{slug:"basic_automation",name:"Basis",nameEn:"Basic",serviceSlug:"automation",visualCount:2,order:1},{slug:"advanced_automation",name:"Erweitert",nameEn:"Advanced",serviceSlug:"automation",visualCount:4,order:2},{slug:"full_automation",name:"Komplett",nameEn:"Complete",serviceSlug:"automation",visualCount:6,order:3}]},Xe={webdesign:[{slug:"blog",name:"Blog",nameEn:"Blog",serviceSlug:"webdesign",requiresAddon:null,visualType:"section",icon:"\u{1F4DD}",order:1,suggestionText:"Die meisten Kunden f\xFCgen auch einen Blog hinzu",suggestionTextEn:"Most clients also add a blog",isRecommended:!0},{slug:"multilang",name:"Mehrsprachigkeit",nameEn:"Multilingual",serviceSlug:"webdesign",requiresAddon:null,visualType:"badge",icon:"\u{1F30D}",order:2,suggestionText:"Erreichen Sie internationale Kunden mit Mehrsprachigkeit",suggestionTextEn:"Reach international customers with multilingual support",isRecommended:!0},{slug:"cms",name:"CMS Integration",nameEn:"CMS Integration",serviceSlug:"webdesign",requiresAddon:null,visualType:"card",icon:"\u{1F4CB}",order:3,suggestionText:"Verwalten Sie Inhalte selbst mit CMS Integration",suggestionTextEn:"Manage content yourself with CMS integration",isRecommended:!1},{slug:"seo",name:"SEO Optimierung",nameEn:"SEO Optimization",serviceSlug:"webdesign",requiresAddon:null,visualType:"badge",icon:"\u{1F50D}",order:4,suggestionText:"Verbessern Sie Ihre Sichtbarkeit mit SEO",suggestionTextEn:"Improve your visibility with SEO",isRecommended:!0},{slug:"analytics",name:"Analytics Setup",nameEn:"Analytics Setup",serviceSlug:"webdesign",requiresAddon:null,visualType:"card",icon:"\u{1F4CA}",order:5,suggestionText:null,suggestionTextEn:null,isRecommended:!1}],social_media:[{slug:"content_creation",name:"Content-Erstellung",nameEn:"Content Creation",serviceSlug:"social_media",requiresAddon:null,visualType:"section",icon:"\u{1F3A8}",order:1,suggestionText:"Professioneller Content erh\xF6ht Engagement um 300%",suggestionTextEn:"Professional content increases engagement by 300%",isRecommended:!0},{slug:"community_management",name:"Community Management",nameEn:"Community Management",serviceSlug:"social_media",requiresAddon:null,visualType:"card",icon:"\u{1F4AC}",order:2,suggestionText:null,suggestionTextEn:null,isRecommended:!1},{slug:"paid_ads",name:"Bezahlte Werbung",nameEn:"Paid Advertising",serviceSlug:"social_media",requiresAddon:null,visualType:"section",icon:"\u{1F4B0}",order:3,suggestionText:"Maximieren Sie Reichweite mit bezahlter Werbung",suggestionTextEn:"Maximize reach with paid advertising",isRecommended:!0},{slug:"influencer",name:"Influencer Marketing",nameEn:"Influencer Marketing",serviceSlug:"social_media",requiresAddon:"paid_ads",visualType:"card",icon:"\u2B50",order:4,suggestionText:null,suggestionTextEn:null,isRecommended:!1}],recruiting:[{slug:"job_ads",name:"Stellenanzeigen",nameEn:"Job Postings",serviceSlug:"recruiting",requiresAddon:null,visualType:"section",icon:"\u{1F4E2}",order:1,suggestionText:"Optimierte Stellenanzeigen f\xFCr mehr Bewerbungen",suggestionTextEn:"Optimized job postings for more applications",isRecommended:!0},{slug:"employer_branding",name:"Employer Branding",nameEn:"Employer Branding",serviceSlug:"recruiting",requiresAddon:null,visualType:"card",icon:"\u{1F3E2}",order:2,suggestionText:null,suggestionTextEn:null,isRecommended:!1},{slug:"social_recruiting",name:"Social Recruiting",nameEn:"Social Recruiting",serviceSlug:"recruiting",requiresAddon:null,visualType:"section",icon:"\u{1F517}",order:3,suggestionText:"Finden Sie Talente \xFCber Social Media",suggestionTextEn:"Find talents through social media",isRecommended:!0}],webapps:[{slug:"user_auth",name:"Benutzer-Login",nameEn:"User Authentication",serviceSlug:"webapps",requiresAddon:null,visualType:"card",icon:"\u{1F510}",order:1,suggestionText:"Sichere Benutzer-Authentifizierung",suggestionTextEn:"Secure user authentication",isRecommended:!0},{slug:"database",name:"Datenbank",nameEn:"Database",serviceSlug:"webapps",requiresAddon:null,visualType:"section",icon:"\u{1F5C4}\uFE0F",order:2,suggestionText:null,suggestionTextEn:null,isRecommended:!1},{slug:"api_integration",name:"API Integration",nameEn:"API Integration",serviceSlug:"webapps",requiresAddon:null,visualType:"card",icon:"\u{1F50C}",order:3,suggestionText:"Verbinden Sie externe Dienste",suggestionTextEn:"Connect external services",isRecommended:!0},{slug:"realtime",name:"Echtzeit-Funktionen",nameEn:"Realtime Features",serviceSlug:"webapps",requiresAddon:"database",visualType:"badge",icon:"\u26A1",order:4,suggestionText:null,suggestionTextEn:null,isRecommended:!1}],automation:[{slug:"crm_integration",name:"CRM Integration",nameEn:"CRM Integration",serviceSlug:"automation",requiresAddon:null,visualType:"section",icon:"\u{1F4C7}",order:1,suggestionText:"Integrieren Sie Ihr CRM f\xFCr nahtlose Lead-Verwaltung",suggestionTextEn:"Integrate your CRM for seamless lead management",isRecommended:!0},{slug:"email_automation",name:"E-Mail Automation",nameEn:"Email Automation",serviceSlug:"automation",requiresAddon:null,visualType:"card",icon:"\u{1F4E7}",order:2,suggestionText:"Automatisierte E-Mail-Sequenzen",suggestionTextEn:"Automated email sequences",isRecommended:!0},{slug:"lead_scoring",name:"Lead Scoring",nameEn:"Lead Scoring",serviceSlug:"automation",requiresAddon:"crm_integration",visualType:"badge",icon:"\u{1F3AF}",order:3,suggestionText:null,suggestionTextEn:null,isRecommended:!1},{slug:"chatbot",name:"Chatbot",nameEn:"Chatbot",serviceSlug:"automation",requiresAddon:null,visualType:"card",icon:"\u{1F916}",order:4,suggestionText:"Automatisieren Sie Kundenanfragen mit einem Chatbot",suggestionTextEn:"Automate customer inquiries with a chatbot",isRecommended:!1}]};function le(){return{services:[...We].sort((e,t)=>e.order-t.order),sizes:{...Ke},addons:{...Xe}}}function ce(e="de"){return{lang:e,selections:{},lastInteractionTime:Date.now(),isSubmitting:!1,submitStatus:"idle",validationErrors:[],suggestionVisible:!1,currentSuggestion:null}}function de(e,t){let s=t,n=new Set;return{getState(){return s},dispatch(i){let o=s;return s=e(s,i),s!==o&&n.forEach(r=>r(s,o,i)),i},subscribe(i){return n.add(i),()=>n.delete(i)},replaceState(i){let o=s;s=i,n.forEach(r=>r(s,o,{type:"REPLACE_STATE"}))}}}var E={TOGGLE_SERVICE:"TOGGLE_SERVICE",SET_SIZE:"SET_SIZE",TOGGLE_ADDON:"TOGGLE_ADDON",REMOVE_SERVICE:"REMOVE_SERVICE",REMOVE_ADDON:"REMOVE_ADDON",SET_LANG:"SET_LANG",RECORD_INTERACTION:"RECORD_INTERACTION",SET_SUBMITTING:"SET_SUBMITTING",SET_SUBMIT_STATUS:"SET_SUBMIT_STATUS",SET_VALIDATION_ERRORS:"SET_VALIDATION_ERRORS",CLEAR_VALIDATION_ERRORS:"CLEAR_VALIDATION_ERRORS",SHOW_SUGGESTION:"SHOW_SUGGESTION",HIDE_SUGGESTION:"HIDE_SUGGESTION",RESET:"RESET"},y={toggleService:e=>({type:E.TOGGLE_SERVICE,payload:{serviceSlug:e}}),setSize:(e,t)=>({type:E.SET_SIZE,payload:{serviceSlug:e,sizeSlug:t}}),toggleAddon:(e,t)=>({type:E.TOGGLE_ADDON,payload:{serviceSlug:e,addonSlug:t}}),removeService:e=>({type:E.REMOVE_SERVICE,payload:{serviceSlug:e}}),removeAddon:(e,t)=>({type:E.REMOVE_ADDON,payload:{serviceSlug:e,addonSlug:t}}),setLang:e=>({type:E.SET_LANG,payload:{lang:e}}),recordInteraction:()=>({type:E.RECORD_INTERACTION}),setSubmitting:e=>({type:E.SET_SUBMITTING,payload:{value:e}}),setSubmitStatus:e=>({type:E.SET_SUBMIT_STATUS,payload:{status:e}}),setValidationErrors:e=>({type:E.SET_VALIDATION_ERRORS,payload:{errors:e}}),clearValidationErrors:()=>({type:E.CLEAR_VALIDATION_ERRORS}),showSuggestion:e=>({type:E.SHOW_SUGGESTION,payload:{suggestion:e}}),hideSuggestion:()=>({type:E.HIDE_SUGGESTION}),reset:()=>({type:E.RESET})};function ue(e,t){let s=new Set([e]),n=!0;for(;n;){n=!1;for(let i of t)i.requiresAddon&&s.has(i.requiresAddon)&&!s.has(i.slug)&&(s.add(i.slug),n=!0)}return s}function Ye(e,t){return t.requiresAddon?e.addons.has(t.requiresAddon):!0}function me(e,t){return function(n,i){switch(i.type){case E.TOGGLE_SERVICE:{let{serviceSlug:o}=i.payload;if(o in n.selections){let c={...n.selections};return delete c[o],{...n,selections:c}}else return{...n,selections:{...n.selections,[o]:{serviceSlug:o,size:null,addons:new Set}}}}case E.SET_SIZE:{let{serviceSlug:o,sizeSlug:r}=i.payload,c=n.selections[o];return c?c.size===r?{...n,selections:{...n.selections,[o]:{...c,size:null,addons:new Set}}}:{...n,selections:{...n.selections,[o]:{...c,size:r}}}:n}case E.TOGGLE_ADDON:{let{serviceSlug:o,addonSlug:r}=i.payload,c=n.selections[o];if(!c||!c.size)return n;let f=e.addons[o]||[],v=f.find(A=>A.slug===r);if(!v)return n;let S=new Set(c.addons);if(S.has(r))ue(r,f).forEach(w=>S.delete(w));else if(Ye(c,v))S.add(r);else return n;return{...n,selections:{...n.selections,[o]:{...c,addons:S}}}}case E.REMOVE_SERVICE:{let{serviceSlug:o}=i.payload,r={...n.selections};return delete r[o],{...n,selections:r}}case E.REMOVE_ADDON:{let{serviceSlug:o,addonSlug:r}=i.payload,c=n.selections[o];if(!c)return n;let f=e.addons[o]||[],v=ue(r,f),S=new Set([...c.addons].filter(A=>!v.has(A)));return{...n,selections:{...n.selections,[o]:{...c,addons:S}}}}case E.SET_LANG:return{...n,lang:i.payload.lang};case E.RECORD_INTERACTION:return{...n,lastInteractionTime:Date.now(),suggestionVisible:!1};case E.SET_SUBMITTING:return{...n,isSubmitting:i.payload.value};case E.SET_SUBMIT_STATUS:return{...n,submitStatus:i.payload.status};case E.SET_VALIDATION_ERRORS:return{...n,validationErrors:i.payload.errors};case E.CLEAR_VALIDATION_ERRORS:return{...n,validationErrors:[]};case E.SHOW_SUGGESTION:return{...n,suggestionVisible:!0,currentSuggestion:i.payload.suggestion};case E.HIDE_SUGGESTION:return{...n,suggestionVisible:!1,currentSuggestion:null};case E.RESET:return{...t};default:return n}}}var ee={de:{title:"Service Konfigurator",subtitle:"Stellen Sie Ihr individuelles Angebot zusammen","services.title":"W\xE4hlen Sie Ihre Services","services.subtitle":"Klicken Sie auf die gew\xFCnschten Services","size.title":"W\xE4hlen Sie die Gr\xF6\xDFe","addons.title":"Zus\xE4tzliche Optionen","summary.title":"Ihre Auswahl","summary.empty":"Noch keine Services ausgew\xE4hlt",submit:"Angebot anfordern",submitting:"Wird gesendet...",reset:"Zur\xFCcksetzen",remove:"Entfernen","success.title":"Vielen Dank!","success.message":"Ihre Anfrage wurde erfolgreich gesendet. Wir melden uns in K\xFCrze bei Ihnen.","error.title":"Fehler","error.message":"Es ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut.","error.retry":"Erneut versuchen","validation.selectService":"Bitte w\xE4hlen Sie mindestens einen Service aus","validation.selectSize":"Bitte w\xE4hlen Sie eine Gr\xF6\xDFe f\xFCr","lang.de":"DE","lang.en":"EN","lang.switch":"Sprache wechseln","suggestion.prefix":"Tipp: ","suggestion.dismiss":"Verstanden","a11y.removeService":"Service entfernen","a11y.removeAddon":"Add-on entfernen","a11y.selectSize":"Gr\xF6\xDFe ausw\xE4hlen","a11y.toggleAddon":"Add-on ausw\xE4hlen oder abw\xE4hlen"},en:{title:"Service Configurator",subtitle:"Build your custom offer","services.title":"Select Your Services","services.subtitle":"Click on the desired services","size.title":"Select Size","addons.title":"Additional Options","summary.title":"Your Selection","summary.empty":"No services selected yet",submit:"Request Offer",submitting:"Sending...",reset:"Reset",remove:"Remove","success.title":"Thank You!","success.message":"Your request has been sent successfully. We will contact you shortly.","error.title":"Error","error.message":"An error occurred. Please try again.","error.retry":"Try Again","validation.selectService":"Please select at least one service","validation.selectSize":"Please select a size for","lang.de":"DE","lang.en":"EN","lang.switch":"Switch language","suggestion.prefix":"Tip: ","suggestion.dismiss":"Got it","a11y.removeService":"Remove service","a11y.removeAddon":"Remove add-on","a11y.selectSize":"Select size","a11y.toggleAddon":"Select or deselect add-on"}};function R(e,t="de"){return(ee[t]||ee.de)[e]||ee.de[e]||e}function X(e,t){return e?t==="en"&&e.nameEn||e.name:""}function ge(e="de"){try{let t=navigator.language||navigator.userLanguage;if(t){let s=t.split("-")[0].toLowerCase();if(s==="de"||s==="en")return s}}catch(t){console.warn("Language detection failed:",t)}return e}function pe(e,t){e.querySelectorAll("[data-i18n]").forEach(n=>{let i=n.getAttribute("data-i18n"),o=R(i,t),r=n.getAttribute("data-i18n-attr");r?n.setAttribute(r,o):n.textContent=o})}function M(e){return Object.keys(e.selections)}function V(e,t){return t in e.selections}function fe(e,t){let s=[],n=M(e);if(n.length===0)return s.push({serviceSlug:null,field:"services",message:e.lang==="de"?"Bitte w\xE4hlen Sie mindestens einen Service aus":"Please select at least one service"}),s;for(let i of n){let o=e.selections[i],r=t.services.find(f=>f.slug===i),c=r?e.lang==="de"?r.name:r.nameEn:i;o.size||s.push({serviceSlug:i,field:"size",message:e.lang==="de"?`Bitte w\xE4hlen Sie eine Gr\xF6\xDFe f\xFCr ${c}`:`Please select a size for ${c}`})}return s}function Se(e,t){let s=[];for(let[n,i]of Object.entries(e.selections)){let o=t.services.find(f=>f.slug===n);if(!o)continue;let r=e.lang==="de"?o.name:o.nameEn;if(s.push({type:"service",serviceSlug:n,slug:n,name:r,removeTarget:`service:${n}`}),i.size){let v=(t.sizes[n]||[]).find(S=>S.slug===i.size);if(v){let S=e.lang==="de"?v.name:v.nameEn;s.push({type:"size",serviceSlug:n,slug:i.size,name:`${r}: ${S}`,removeTarget:null})}}let c=t.addons[n]||[];for(let f of i.addons){let v=c.find(S=>S.slug===f);if(v){let S=e.lang==="de"?v.name:v.nameEn;s.push({type:"addon",serviceSlug:n,slug:f,name:`+ ${S}`,removeTarget:`addon:${n}:${f}`})}}}return s}function ve(e,t){let s=M(e);if(s.length===0)return null;for(let n of s){let i=e.selections[n];if(!i.size)continue;let o=t.addons[n]||[];for(let r of o)if(r.isRecommended&&!i.addons.has(r.slug)&&r.suggestionText){if(r.requiresAddon&&!i.addons.has(r.requiresAddon))continue;return{serviceSlug:n,addonSlug:r.slug,text:e.lang==="de"?r.suggestionText:r.suggestionTextEn,addonName:e.lang==="de"?r.name:r.nameEn}}}return null}function je(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function ye(e,t){let s;return function(...n){clearTimeout(s),s=setTimeout(()=>e.apply(this,n),t)}}function te(){return new Promise(e=>requestAnimationFrame(e))}function he(e){let t=e.split(":");return t[0]==="service"?{type:"service",serviceSlug:t[1]}:t[0]==="addon"?{type:"addon",serviceSlug:t[1],addonSlug:t[2]}:null}function be(){let e="tl-configurator-session",t=sessionStorage.getItem(e);return t||(t=je(),sessionStorage.setItem(e,t)),t}function Te(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function xe(e){let t={};for(let[s,n]of Object.entries(e))t[s]={...n,addons:[...n.addons]};return t}var Y=new Map;function Ze(e){if(Y.has(e))return Y.get(e);let t=document.querySelector(e);return t&&Y.set(e,t),t}function Ae(){let e=document.createElement("div");e.style.display="none",e.innerHTML=`
    <!-- Service Card Template -->
    <template data-template="service-card">
      <button class="tl-service-card" data-service="" data-action="toggle-service">
        <span class="tl-service-icon" data-service-icon></span>
        <span class="tl-service-name" data-service-name></span>
        <span class="tl-service-check">\u2713</span>
      </button>
    </template>
    
    <!-- Service Build Area Template -->
    <template data-template="service-build">
      <div class="tl-service-build" data-service-build="">
        <div class="tl-build-header">
          <span class="tl-build-title" data-build-title></span>
          <button class="tl-build-remove" data-action="remove" data-target="" aria-label="Remove">\xD7</button>
        </div>
        <div class="tl-size-selector" data-size-selector></div>
        <div class="tl-visual-container" data-visual-container></div>
        <div class="tl-addons-container" data-addons-container></div>
      </div>
    </template>
    
    <!-- Size Button Template -->
    <template data-template="size-btn">
      <button class="tl-size-btn" data-size="" data-for-service="" data-action="set-size">
        <span data-size-name></span>
      </button>
    </template>
    
    <!-- Page Card Template (for webdesign visual) -->
    <template data-template="page-card">
      <div class="tl-page-card">
        <span class="tl-page-number" data-page-number></span>
        <span class="tl-page-label">Seite</span>
      </div>
    </template>
    
    <!-- Module Card Template -->
    <template data-template="module-card">
      <div class="tl-module-card">
        <span class="tl-module-icon" data-module-icon></span>
        <span class="tl-module-name" data-module-name></span>
      </div>
    </template>
    
    <!-- Addon Button Template -->
    <template data-template="addon-btn">
      <button class="tl-addon-btn" data-addon="" data-for-service="" data-action="toggle-addon">
        <span class="tl-addon-icon" data-addon-icon></span>
        <span class="tl-addon-name" data-addon-name></span>
        <span class="tl-addon-check">\u2713</span>
      </button>
    </template>
    
    <!-- Summary Chip Template -->
    <template data-template="summary-chip">
      <div class="tl-summary-chip" data-chip="">
        <span class="tl-chip-text" data-chip-text></span>
        <button class="tl-chip-remove" data-action="remove" data-target="" aria-label="Remove">\xD7</button>
      </div>
    </template>
    
    <!-- Suggestion Toast Template -->
    <template data-template="suggestion">
      <div class="tl-suggestion-toast">
        <span class="tl-suggestion-icon">\u{1F4A1}</span>
        <span class="tl-suggestion-text" data-suggestion-text></span>
        <button class="tl-suggestion-dismiss" data-action="dismiss-suggestion">\xD7</button>
      </div>
    </template>
    
    <!-- Addon Visual Card Template -->
    <template data-template="addon-visual-card">
      <div class="tl-addon-visual" data-addon-visual="">
        <span class="tl-addon-visual-icon" data-addon-visual-icon></span>
        <span class="tl-addon-visual-name" data-addon-visual-name></span>
      </div>
    </template>
    
    <!-- Addon Badge Template -->
    <template data-template="addon-badge">
      <span class="tl-addon-badge" data-addon-badge="">
        <span data-badge-text></span>
      </span>
    </template>
    
    <!-- Addon Section Template -->
    <template data-template="addon-section">
      <div class="tl-addon-section" data-addon-section="">
        <div class="tl-addon-section-header">
          <span class="tl-addon-section-icon" data-section-icon></span>
          <span class="tl-addon-section-name" data-section-name></span>
        </div>
      </div>
    </template>
  `,document.body.appendChild(e),Y.clear()}function q(e){let t=`[data-template="${e}"]`,s=Ze(t);return s?s.content.cloneNode(!0):(console.warn(`Template not found: ${e}`),null)}function Ce(e,t,s=!1){let n=q("service-card");if(!n)return null;let i=n.querySelector("[data-service]")||n.firstElementChild,o=t==="en"?e.nameEn:e.name;return i.setAttribute("data-service",e.slug),i.querySelector("[data-service-icon]").textContent=e.icon||"\u{1F4E6}",i.querySelector("[data-service-name]").textContent=o,s&&i.classList.add("is-selected"),i}function Ie(e,t){let s=q("service-build");if(!s)return null;let n=s.querySelector("[data-service-build]")||s.firstElementChild,i=t==="en"?e.nameEn:e.name;n.setAttribute("data-service-build",e.slug),n.querySelector("[data-build-title]").textContent=i;let o=n.querySelector('[data-action="remove"]');return o&&o.setAttribute("data-target",`service:${e.slug}`),n}function _e(e,t,s,n=!1){let i=q("size-btn");if(!i)return null;let o=i.querySelector("[data-size]")||i.firstElementChild,r=s==="en"?e.nameEn:e.name;return o.setAttribute("data-size",e.slug),o.setAttribute("data-for-service",t),o.querySelector("[data-size-name]").textContent=r,n&&o.classList.add("is-selected"),o}function Re(e,t){let s=document.createDocumentFragment(),n=Math.min(e,10);for(let i=1;i<=n;i++){let o=q("page-card");if(o){let r=o.querySelector(".tl-page-card")||o.firstElementChild;r.querySelector("[data-page-number]").textContent=i,r.style.setProperty("--animation-delay",`${(i-1)*50}ms`),s.appendChild(r)}}if(e>n){let i=document.createElement("div");i.className="tl-page-card tl-page-more",i.textContent=`+${e-n}`,s.appendChild(i)}return s}function Le(e,t){let s=document.createDocumentFragment(),n=t==="en"?["Module","Component","Feature","System","Integration","Platform"]:["Modul","Komponente","Feature","System","Integration","Plattform"];for(let i=0;i<e;i++){let o=q("module-card");if(o){let r=o.querySelector(".tl-module-card")||o.firstElementChild,c=r.querySelector("[data-module-icon]"),f=r.querySelector("[data-module-name]");c&&(c.textContent=["\u2699\uFE0F","\u{1F527}","\u{1F4CA}","\u{1F50C}","\u{1F3AF}","\u{1F4C8}"][i%6]),f&&(f.textContent=n[i%n.length]),r.style.setProperty("--animation-delay",`${i*50}ms`),s.appendChild(r)}}return s}function we(e,t,s,n=!1,i=!1){let o=q("addon-btn");if(!o)return null;let r=o.querySelector("[data-addon]")||o.firstElementChild,c=s==="en"?e.nameEn:e.name;return r.setAttribute("data-addon",e.slug),r.setAttribute("data-for-service",t),r.querySelector("[data-addon-icon]").textContent=e.icon||"\u2795",r.querySelector("[data-addon-name]").textContent=c,n&&r.classList.add("is-selected"),i&&(r.classList.add("is-disabled"),r.setAttribute("disabled","disabled"),r.setAttribute("title",s==="en"?"Requires another add-on first":"Ben\xF6tigt erst ein anderes Add-on")),r}function ne(e,t){let s=t==="en"?e.nameEn:e.name;switch(e.visualType){case"section":{let n=q("addon-section");if(!n)return null;let i=n.querySelector("[data-addon-section]")||n.firstElementChild;i.setAttribute("data-addon-section",e.slug);let o=i.querySelector("[data-section-icon]"),r=i.querySelector("[data-section-name]");return o&&(o.textContent=e.icon||"\u{1F4CB}"),r&&(r.textContent=s),i}case"badge":{let n=q("addon-badge");if(!n)return null;let i=n.querySelector("[data-addon-badge]")||n.firstElementChild;i.setAttribute("data-addon-badge",e.slug);let o=i.querySelector("[data-badge-text]");return o&&(o.textContent=s),i}case"card":default:{let n=q("addon-visual-card");if(!n)return null;let i=n.querySelector("[data-addon-visual]")||n.firstElementChild;i.setAttribute("data-addon-visual",e.slug);let o=i.querySelector("[data-addon-visual-icon]"),r=i.querySelector("[data-addon-visual-name]");return o&&(o.textContent=e.icon||"\u{1F4E6}"),r&&(r.textContent=s),i}}}function ze(e){let t=q("summary-chip");if(!t)return null;let s=t.querySelector("[data-chip]")||t.firstElementChild;s.setAttribute("data-chip",`${e.type}:${e.serviceSlug}:${e.slug}`),s.classList.add(`tl-chip-${e.type}`),s.querySelector("[data-chip-text]").textContent=e.name;let n=s.querySelector('[data-action="remove"]');return n&&(e.removeTarget?n.setAttribute("data-target",e.removeTarget):n.style.display="none"),s}function Oe(e){let t=q("suggestion");if(!t)return null;let s=t.querySelector(".tl-suggestion-toast")||t.firstElementChild,n=s.querySelector("[data-suggestion-text]");return n&&(n.textContent=e.text),s.setAttribute("data-suggestion-service",e.serviceSlug),s.setAttribute("data-suggestion-addon",e.addonSlug),s}var T={POP_ENTER:"tl-anim-pop-enter",POP_EXIT:"tl-anim-pop-exit",FADE_ENTER:"tl-anim-fade-enter",FADE_EXIT:"tl-anim-fade-exit",SLIDE_DOWN_ENTER:"tl-anim-slide-down-enter",SLIDE_UP_EXIT:"tl-anim-slide-up-exit",STAGGER:"tl-anim-stagger",SHAKE:"tl-anim-shake"},L={POP:300,FADE:200,SLIDE:250,STAGGER_DELAY:50,SHAKE:400};function H(){return Te()}function U(e,t="pop",s=0){return H()?(e.style.opacity="1",Promise.resolve()):new Promise(n=>{let i={pop:T.POP_ENTER,fade:T.FADE_ENTER,slide:T.SLIDE_DOWN_ENTER}[t]||T.POP_ENTER,o={pop:L.POP,fade:L.FADE,slide:L.SLIDE}[t]||L.POP;s>0&&(e.style.animationDelay=`${s}ms`),e.classList.add(i);let r=()=>{e.classList.remove(i),e.style.animationDelay="",n()};e.addEventListener("animationend",r,{once:!0}),setTimeout(r,o+s+50)})}function se(e,t="pop",s=!0){return H()?(s?e.remove():e.style.opacity="0",Promise.resolve()):new Promise(n=>{let i={pop:T.POP_EXIT,fade:T.FADE_EXIT,slide:T.SLIDE_UP_EXIT}[t]||T.POP_EXIT,o={pop:L.POP,fade:L.FADE,slide:L.SLIDE}[t]||L.POP;e.classList.add(i);let r=()=>{s?e.remove():e.classList.remove(i),n()};e.addEventListener("animationend",r,{once:!0}),setTimeout(r,o+50)})}function ie(e,t="pop",s=L.STAGGER_DELAY){if(H())return e.forEach(i=>i.style.opacity="1"),Promise.resolve();let n=e.map((i,o)=>U(i,t,o*s));return Promise.all(n)}function ae(e){return H()?(e.style.transition="background-color 0.1s",e.style.backgroundColor="rgba(255, 0, 0, 0.2)",setTimeout(()=>{e.style.backgroundColor=""},200),Promise.resolve()):new Promise(t=>{e.classList.add(T.SHAKE);let s=()=>{e.classList.remove(T.SHAKE),t()};e.addEventListener("animationend",s,{once:!0}),setTimeout(s,L.SHAKE+50)})}async function De(e){if(H()){e.style.height="auto",e.style.overflow="";return}e.style.height="auto",e.style.overflow="hidden";let t=e.offsetHeight;return e.style.height="0",await te(),e.style.transition="height 0.3s ease-out",e.style.height=`${t}px`,new Promise(s=>{let n=()=>{e.style.height="auto",e.style.overflow="",e.style.transition="",s()};e.addEventListener("transitionend",n,{once:!0}),setTimeout(n,350)})}async function qe(e,t=!0){if(H()){t?e.remove():(e.style.height="0",e.style.overflow="hidden");return}let s=e.offsetHeight;return e.style.height=`${s}px`,e.style.overflow="hidden",await te(),e.style.transition="height 0.25s ease-in, opacity 0.2s ease-in",e.style.height="0",e.style.opacity="0",new Promise(n=>{let i=()=>{t&&e.remove(),n()};e.addEventListener("transitionend",i,{once:!0}),setTimeout(i,300)})}function Pe(){let e="tl-configurator-animations";if(document.getElementById(e))return;let t=`
    /* Pop Enter */
    @keyframes tlPopIn {
      0% {
        opacity: 0;
        transform: scale(0.8);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }
    
    /* Pop Exit */
    @keyframes tlPopOut {
      0% {
        opacity: 1;
        transform: scale(1);
      }
      100% {
        opacity: 0;
        transform: scale(0.8);
      }
    }
    
    /* Fade Enter */
    @keyframes tlFadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    /* Fade Exit */
    @keyframes tlFadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }
    
    /* Slide Down Enter */
    @keyframes tlSlideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Slide Up Exit */
    @keyframes tlSlideUp {
      from {
        opacity: 1;
        transform: translateY(0);
      }
      to {
        opacity: 0;
        transform: translateY(-10px);
      }
    }
    
    /* Shake */
    @keyframes tlShake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
      20%, 40%, 60%, 80% { transform: translateX(4px); }
    }
    
    /* Animation Classes */
    .${T.POP_ENTER} {
      animation: tlPopIn ${L.POP}ms cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    }
    
    .${T.POP_EXIT} {
      animation: tlPopOut ${L.POP*.66}ms ease-out forwards;
    }
    
    .${T.FADE_ENTER} {
      animation: tlFadeIn ${L.FADE}ms ease-out forwards;
    }
    
    .${T.FADE_EXIT} {
      animation: tlFadeOut ${L.FADE}ms ease-in forwards;
    }
    
    .${T.SLIDE_DOWN_ENTER} {
      animation: tlSlideDown ${L.SLIDE}ms ease-out forwards;
    }
    
    .${T.SLIDE_UP_EXIT} {
      animation: tlSlideUp ${L.SLIDE}ms ease-in forwards;
    }
    
    .${T.SHAKE} {
      animation: tlShake ${L.SHAKE}ms ease-in-out;
    }
    
    /* Respect reduced motion preference */
    @media (prefers-reduced-motion: reduce) {
      .${T.POP_ENTER},
      .${T.POP_EXIT},
      .${T.FADE_ENTER},
      .${T.FADE_EXIT},
      .${T.SLIDE_DOWN_ENTER},
      .${T.SLIDE_UP_EXIT},
      .${T.SHAKE} {
        animation: none !important;
        transition: none !important;
      }
    }
  `,s=document.createElement("style");s.id=e,s.textContent=t,document.head.appendChild(s)}function Ne(e,t,s){let n={};function i(){Pe(),Ae(),o(),r(),c(t.getState(),null)}function o(){let a=t.getState();e.innerHTML=`
      <div class="tl-configurator">
        <!-- Language Toggle -->
        <div class="tl-lang-toggle" data-lang-toggle>
          <button class="tl-lang-btn ${a.lang==="de"?"is-active":""}" 
                  data-action="set-lang" data-lang="de">DE</button>
          <button class="tl-lang-btn ${a.lang==="en"?"is-active":""}" 
                  data-action="set-lang" data-lang="en">EN</button>
        </div>
        
        <!-- Header -->
        <header class="tl-header">
          <h1 class="tl-title" data-i18n="title">${R("title",a.lang)}</h1>
          <p class="tl-subtitle" data-i18n="subtitle">${R("subtitle",a.lang)}</p>
        </header>
        
        <!-- Services Grid -->
        <section class="tl-section tl-services-section">
          <h2 class="tl-section-title" data-i18n="services.title">${R("services.title",a.lang)}</h2>
          <div class="tl-services-grid" data-services-grid></div>
        </section>
        
        <!-- Build Area -->
        <section class="tl-section tl-build-section">
          <div class="tl-build-area" data-build-area></div>
        </section>
        
        <!-- Summary -->
        <aside class="tl-summary-panel" data-summary>
          <h3 class="tl-summary-title" data-i18n="summary.title">${R("summary.title",a.lang)}</h3>
          <div class="tl-summary-items" data-summary-items>
            <p class="tl-summary-empty" data-i18n="summary.empty">${R("summary.empty",a.lang)}</p>
          </div>
        </aside>
        
        <!-- Suggestion Container -->
        <div class="tl-suggestion-container" data-suggestion-container></div>
        
        <!-- Submit Section -->
        <section class="tl-submit-section" data-submit-section>
          <div class="tl-validation-errors" data-validation-errors></div>
          <button class="tl-submit-btn" data-submit-btn data-action="submit">
            <span data-i18n="submit">${R("submit",a.lang)}</span>
          </button>
          <div class="tl-submit-status" data-submit-status></div>
        </section>
      </div>
    `}function r(){n={servicesGrid:e.querySelector("[data-services-grid]"),buildArea:e.querySelector("[data-build-area]"),summary:e.querySelector("[data-summary]"),summaryItems:e.querySelector("[data-summary-items]"),submitBtn:e.querySelector("[data-submit-btn]"),submitStatus:e.querySelector("[data-submit-status]"),validationErrors:e.querySelector("[data-validation-errors]"),suggestionContainer:e.querySelector("[data-suggestion-container]"),langToggle:e.querySelector("[data-lang-toggle]")}}function c(a,l,d={}){if(!l){f(a),D(a);return}if(a.lang!==l.lang){pe(e,a.lang),f(a),S(a),D(a),Z(a.lang);return}a.selections!==l.selections&&(v(a,l),A(a,l,d),D(a)),(a.isSubmitting!==l.isSubmitting||a.submitStatus!==l.submitStatus)&&B(a),a.validationErrors!==l.validationErrors&&K(a),(a.suggestionVisible!==l.suggestionVisible||a.currentSuggestion!==l.currentSuggestion)&&j(a)}function f(a){let l=document.createDocumentFragment();for(let u of s.services){let g=V(a,u.slug),x=Ce(u,a.lang,g);x&&l.appendChild(x)}n.servicesGrid.innerHTML="",n.servicesGrid.appendChild(l);let d=n.servicesGrid.querySelectorAll(".tl-service-card");ie([...d],"fade",30)}function v(a,l){n.servicesGrid.querySelectorAll("[data-service]").forEach(u=>{let g=u.getAttribute("data-service"),x=V(l,g),_=V(a,g);x!==_&&u.classList.toggle("is-selected",_)})}function S(a){n.buildArea.innerHTML="";let l=M(a);for(let d of l){let u=s.services.find(g=>g.slug===d);if(u){let g=w(u,a);n.buildArea.appendChild(g)}}}function A(a,l,d){let u=new Set(M(l)),g=new Set(M(a)),x=[...g].filter(h=>!u.has(h)),_=[...u].filter(h=>!g.has(h));for(let h of _){let b=n.buildArea.querySelector(`[data-service-build="${h}"]`);b&&qe(b,!0)}for(let h of x){let b=s.services.find(C=>C.slug===h);if(b){let C=w(b,a);n.buildArea.appendChild(C),De(C)}}for(let h of g)if(u.has(h)){let b=l.selections[h],C=a.selections[h];b.size!==C.size&&N(h,a,l),b.addons!==C.addons&&F(h,a,l)}}function w(a,l){let d=l.selections[a.slug],u=Ie(a,l.lang),g=u.querySelector("[data-size-selector]"),x=s.sizes[a.slug]||[];for(let b of x){let C=d&&d.size===b.slug,I=_e(b,a.slug,l.lang,C);I&&g.appendChild(I)}let _=u.querySelector("[data-visual-container]");if(d&&d.size){let b=x.find(C=>C.slug===d.size);b&&G(_,a,b,d,l.lang)}let h=u.querySelector("[data-addons-container]");return d&&d.size&&z(h,a.slug,d,l),u}function N(a,l,d){let u=n.buildArea.querySelector(`[data-service-build="${a}"]`);if(!u)return;let g=l.selections[a],x=s.services.find(I=>I.slug===a),_=s.sizes[a]||[];u.querySelectorAll("[data-size]").forEach(I=>{let W=I.getAttribute("data-size")===g.size;I.classList.toggle("is-selected",W)});let b=u.querySelector("[data-visual-container]");if(b.innerHTML="",g.size){let I=_.find(W=>W.slug===g.size);I&&G(b,x,I,g,l.lang)}let C=u.querySelector("[data-addons-container]");C.innerHTML="",g.size&&z(C,a,g,l)}function F(a,l,d){let u=n.buildArea.querySelector(`[data-service-build="${a}"]`);if(!u)return;let g=l.selections[a],x=d.selections[a],_=s.addons[a]||[];u.querySelectorAll("[data-addon]").forEach(O=>{let $=O.getAttribute("data-addon"),k=g.addons.has($),J=_.find(ke=>ke.slug===$),oe=J&&J.requiresAddon&&!g.addons.has(J.requiresAddon);O.classList.toggle("is-selected",k),O.classList.toggle("is-disabled",oe),O.disabled=oe});let b=u.querySelector("[data-visual-container]"),C=x?x.addons:new Set,I=[...g.addons].filter(O=>!C.has(O)),W=[...C].filter(O=>!g.addons.has(O));for(let O of W){let $=b.querySelector(`[data-addon-visual="${O}"], [data-addon-section="${O}"], [data-addon-badge="${O}"]`);$&&se($,"pop",!0)}for(let O of I){let $=_.find(k=>k.slug===O);if($){let k=ne($,l.lang);k&&(b.appendChild(k),U(k,"pop"))}}}function G(a,l,d,u,g){let x;switch(l.visualType){case"pages":x=Re(d.visualCount,g);break;case"modules":case"cards":default:x=Le(d.visualCount,g);break}a.appendChild(x);let _=s.addons[l.slug]||[];for(let b of u.addons){let C=_.find(I=>I.slug===b);if(C){let I=ne(C,g);I&&a.appendChild(I)}}let h=a.children;ie([...h],"pop",50)}function z(a,l,d,u){let g=s.addons[l]||[];if(g.length===0){a.style.display="none";return}a.style.display="";let x=document.createElement("h4");x.className="tl-addons-title",x.setAttribute("data-i18n","addons.title"),x.textContent=R("addons.title",u.lang),a.appendChild(x);let _=document.createElement("div");_.className="tl-addons-buttons";for(let h of g){let b=d.addons.has(h.slug),C=h.requiresAddon&&!d.addons.has(h.requiresAddon),I=we(h,l,u.lang,b,C);I&&_.appendChild(I)}a.appendChild(_)}function D(a){let l=Se(a,s);if(l.length===0){n.summaryItems.innerHTML=`
        <p class="tl-summary-empty" data-i18n="summary.empty">${R("summary.empty",a.lang)}</p>
      `;return}let d=document.createDocumentFragment();for(let u of l){let g=ze(u);g&&d.appendChild(g)}n.summaryItems.innerHTML="",n.summaryItems.appendChild(d)}function B(a){let l=n.submitBtn,d=n.submitStatus;l.disabled=a.isSubmitting,l.classList.toggle("is-loading",a.isSubmitting);let u=l.querySelector("[data-i18n]");switch(u&&(u.textContent=a.isSubmitting?R("submitting",a.lang):R("submit",a.lang)),a.submitStatus){case"success":d.innerHTML=`
          <div class="tl-status-success">
            <h4>${R("success.title",a.lang)}</h4>
            <p>${R("success.message",a.lang)}</p>
          </div>
        `,d.style.display="block",U(d,"fade");break;case"error":d.innerHTML=`
          <div class="tl-status-error">
            <h4>${R("error.title",a.lang)}</h4>
            <p>${R("error.message",a.lang)}</p>
            <button class="tl-retry-btn" data-action="retry">${R("error.retry",a.lang)}</button>
          </div>
        `,d.style.display="block",U(d,"fade");break;default:d.style.display="none",d.innerHTML=""}}function K(a){let l=n.validationErrors;if(a.validationErrors.length===0){l.innerHTML="",l.style.display="none";return}l.innerHTML=a.validationErrors.map(d=>`<p class="tl-validation-error">${d.message}</p>`).join(""),l.style.display="block",ae(l);for(let d of a.validationErrors)if(d.serviceSlug){let u=n.buildArea.querySelector(`[data-service-build="${d.serviceSlug}"]`);u&&(u.classList.add("has-error"),ae(u))}}function j(a){let l=n.suggestionContainer;if(!a.suggestionVisible||!a.currentSuggestion){let u=l.querySelector(".tl-suggestion-toast");u&&se(u,"slide",!0);return}l.innerHTML="";let d=Oe(a.currentSuggestion);d&&(l.appendChild(d),U(d,"slide"))}function Z(a){n.langToggle.querySelectorAll("[data-lang]").forEach(d=>{d.classList.toggle("is-active",d.getAttribute("data-lang")===a)})}function p(){return e}function m(){return n}return{init:i,render:c,getRoot:p,getElements:m}}function $e(e,t,s,n){let i=null,o=null;function r(){e.addEventListener("click",c),e.addEventListener("keydown",f),B(),e.addEventListener("mousemove",ye(D,1e3),{passive:!0}),e.addEventListener("touchstart",D,{passive:!0})}function c(p){D();let m=p.target.closest("[data-action]");if(!m)return;let a=m.dataset.action;switch(m.tagName==="BUTTON"&&p.preventDefault(),a){case"toggle-service":v(m);break;case"set-size":S(m);break;case"toggle-addon":A(m);break;case"remove":w(m);break;case"submit":N();break;case"set-lang":F(m);break;case"dismiss-suggestion":G();break;case"retry":z();break}}function f(p){if(p.key==="Enter"||p.key===" "){let m=p.target;m.matches("[data-action]")&&m.tagName!=="BUTTON"&&(p.preventDefault(),c({target:m,preventDefault:()=>{}}))}p.key==="Escape"&&t.getState().suggestionVisible&&t.dispatch(y.hideSuggestion())}function v(p){let m=p.dataset.service;m&&(t.dispatch(y.toggleService(m)),t.dispatch(y.clearValidationErrors()))}function S(p){let m=p.dataset.size,a=p.dataset.forService;if(!m||!a)return;let l=t.getState();V(l,a)&&(t.dispatch(y.setSize(a,m)),t.dispatch(y.clearValidationErrors()))}function A(p){let m=p.dataset.addon,a=p.dataset.forService;!m||!a||p.classList.contains("is-disabled")||p.disabled||t.dispatch(y.toggleAddon(a,m))}function w(p){let m=p.dataset.target;if(!m)return;let a=he(m);a&&(a.type==="service"?t.dispatch(y.removeService(a.serviceSlug)):a.type==="addon"&&t.dispatch(y.removeAddon(a.serviceSlug,a.addonSlug)),t.dispatch(y.clearValidationErrors()))}async function N(){let p=t.getState();if(p.isSubmitting)return;let m=fe(p,s);if(m.length>0){t.dispatch(y.setValidationErrors(m));return}t.dispatch(y.clearValidationErrors()),n&&await n(p)}function F(p){let m=p.dataset.lang;!m||m!=="de"&&m!=="en"||t.dispatch(y.setLang(m))}function G(){t.dispatch(y.hideSuggestion())}function z(){t.dispatch(y.setSubmitStatus("idle")),N()}function D(){t.dispatch(y.recordInteraction()),t.dispatch(y.hideSuggestion()),K()}function B(){clearTimeout(i),i=setTimeout(()=>{j()},P.inactivityTimeout)}function K(){clearTimeout(i),clearTimeout(o),B()}function j(){let p=t.getState();if(p.isSubmitting||p.suggestionVisible||M(p).length===0)return;let m=ve(p,s);m&&(t.dispatch(y.showSuggestion(m)),o=setTimeout(()=>{t.dispatch(y.hideSuggestion())},P.suggestionDuration))}function Z(){e.removeEventListener("click",c),e.removeEventListener("keydown",f),clearTimeout(i),clearTimeout(o)}return{init:r,destroy:Z,recordInteraction:D,resetInactivityTimer:K}}function Je(e,t){let s=e.lang,n=be(),i=Object.values(e.selections).filter(r=>r.size).map(r=>{let c=t.services.find(z=>z.slug===r.serviceSlug),v=(t.sizes[r.serviceSlug]||[]).find(z=>z.slug===r.size),S=t.addons[r.serviceSlug]||[],A=c?X(c,s):r.serviceSlug,w=v?X(v,s):r.size,N=[...r.addons].map(z=>{let D=S.find(B=>B.slug===z);return{id:z,name:D?X(D,s):z}}),F=[w,...N.map(z=>z.name)],G=`${A}: ${F.join(" + ")}`;return{id:r.serviceSlug,name:A,size:{id:r.size,name:w},addons:N,summary:G}}),o=i.map(r=>{let c=r.addons.length>0?` (${r.size.name} + ${r.addons.map(f=>f.name).join(" + ")})`:` (${r.size.name})`;return r.name+c}).join(", ");return{meta:{timestamp:new Date().toISOString(),sourceUrl:window.location.href,lang:s,userAgent:navigator.userAgent,sessionId:n},services:i,humanSummary:o,rawConfig:JSON.stringify(xe(e.selections))}}function Qe(e){let t=[];(!e.services||e.services.length===0)&&t.push("No services selected");for(let s of e.services||[])s.id||t.push("Service missing ID"),(!s.size||!s.size.id)&&t.push(`Service ${s.id} missing size`);return(!e.meta||!e.meta.sessionId)&&t.push("Missing session ID"),{valid:t.length===0,errors:t}}async function et(e,t,s={}){let{retries:n=2,retryDelay:i=1e3}=s,o="tl-configurator-last-submission";if(localStorage.getItem(o)===e.meta.sessionId)return console.warn("Duplicate submission prevented"),{success:!1,error:"duplicate",isDuplicate:!0};let c=Qe(e);if(!c.valid)return console.error("Invalid payload:",c.errors),{success:!1,error:c.errors.join(", ")};let f=null;for(let v=0;v<=n;v++)try{let S=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)});if(!S.ok)throw new Error(`HTTP ${S.status}: ${S.statusText}`);localStorage.setItem(o,e.meta.sessionId);let A=null;try{let w=await S.text();w&&(A=JSON.parse(w))}catch{}return{success:!0,data:A}}catch(S){f=S,console.warn(`Submission attempt ${v+1} failed:`,S.message),v<n&&await new Promise(A=>setTimeout(A,i*(v+1)))}return{success:!1,error:f?.message||"Unknown error"}}function Me(e,t,s){return async function(i){e.dispatch(y.setSubmitting(!0)),e.dispatch(y.setSubmitStatus("idle"));try{let o=Je(i,t);console.log("Submitting payload:",o);let r=await et(o,s);r.success?(e.dispatch(y.setSubmitStatus("success")),typeof gtag=="function"&&gtag("event","form_submit",{event_category:"configurator",event_label:"success",value:o.services.length})):r.isDuplicate?e.dispatch(y.setSubmitStatus("success")):(e.dispatch(y.setSubmitStatus("error")),console.error("Submission failed:",r.error))}catch(o){console.error("Submission error:",o),e.dispatch(y.setSubmitStatus("error"))}finally{e.dispatch(y.setSubmitting(!1))}}}function re(e={}){let t={webhookUrl:e.webhookUrl||P.webhookUrl,inactivityTimeout:e.inactivityTimeout||P.inactivityTimeout,defaultLang:e.defaultLang||P.defaultLang,rootSelector:e.rootSelector||P.selectors.root,autoDetectLang:e.autoDetectLang!==!1};P.webhookUrl=t.webhookUrl,P.inactivityTimeout=t.inactivityTimeout;let s=document.querySelector(t.rootSelector);if(!s)return console.error(`TL Configurator: Root element not found (${t.rootSelector})`),null;let n=le(),i=t.defaultLang;t.autoDetectLang&&(i=ge(t.defaultLang));let o=ce(i),r=me(n,o),c=de(r,o),f=Me(c,n,t.webhookUrl),v=Ne(s,c,n),S=$e(s,c,n,f);return c.subscribe((A,w,N)=>{v.render(A,w,N)}),v.init(),S.init(),typeof performance<"u"&&performance.mark("tl-configurator-ready"),console.log("TL Configurator initialized",{lang:i,services:n.services.length}),{getState:()=>c.getState(),getConfigData:()=>n,setLang:A=>{(A==="de"||A==="en")&&c.dispatch({type:"SET_LANG",payload:{lang:A}})},reset:()=>{c.dispatch({type:"RESET"})},destroy:()=>{S.destroy(),s.innerHTML=""},submit:()=>f(c.getState())}}typeof window<"u"&&(window.TLConfigurator={init:re});var tt={init:re};return Fe(nt);})();
